<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics</title>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script>
        window.onload = function () {
            //pie chart
            var chart = new CanvasJS.Chart("chartContainer", {
                theme: "dark2",  // "light1", "light2", "dark1", "dark2"
                animationEnabled: true,
                title: {
                    text: "Tags of {{handle}}"
                },
                legend: {
                    cursor: "pointer",
                    itemclick: explodePie
                },
                data: [{
                    type: "doughnut",
                    innerRadius: 68,
                    showInLegend: true,
                    toolTipContent: "<b>{name}</b>: {y}",// (#percent%)
                    //indexLabel: "{name} - #percent%",
                    dataPoints: [
                        {{#each tags}}
                        { y: {{this}}, name: "{{@key}}" },
                        {{/each}}
                    ]
                }]
            });
            chart.render();

            function explodePie(e) {
                if (typeof (e.dataSeries.dataPoints[e.dataPointIndex].exploded) === "undefined" || !e.dataSeries.dataPoints[e.dataPointIndex].exploded) {
                    e.dataSeries.dataPoints[e.dataPointIndex].exploded = true;
                } else {
                    e.dataSeries.dataPoints[e.dataPointIndex].exploded = false;
                }
                e.chart.render();
            }

        //bar chart for rating
    var chart = new CanvasJS.Chart("chartContainer1", {
        animationEnabled: true,
        theme: "dark1", // "light1", "light2", "dark1", "dark2"
        title: {
            text: "Problem Rating of {{handle}}"
        },
      //  axisY: {
      //      title: "Reserves(MMbbl)"
      //  },
      axisX: {
            interval:1,
            labelAutoFit: false
        },
        data: [{
            type: "column",
            dataPoints: [
            {{#each ratingDis}}
                { y: {{this}}, label: "{{@key}}" },
            {{/each}}
            ]
        }]
    });
    chart.render();


              //bar chart for levels
    var chart = new CanvasJS.Chart("chartContainer2", {
        animationEnabled: true,
        theme: "dark1", // "light1", "light2", "dark1", "dark2"
        title: {
            text: "Levels of {{handle}}"
        },
      //  axisY: {
      //      title: "Reserves(MMbbl)"
      //  },
      axisX: {
            interval:1,
            labelAutoFit: false
        },
        data: [{
            type: "column",
            dataPoints: [
            {{#each levelDis}}
                { y: {{this}}, label: "{{@key}}" },
            {{/each}}
            ]
        }]
    });
    chart.render();
        }
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/analytics.css">
    <link rel="stylesheet" href="/css/style.css">

</head>
<body>
    <header class="navbar navbar-expand-md navbar-dark bd-navbar">
        <nav class="container-xxl flex-wrap flex-md-nowrap">
            <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav pt-2 py-md-0">
                <li class="nav-item col-6 col-md-auto "><a class="nav-link p-2" href="/">Home</a></li>
                <li class="nav-item col-6 col-md-auto"><a class="nav-link p-2" href="/contests">Contests</a></li>
                <li class="nav-item col-6 col-md-auto"><a class="nav-link p-2" href="/resources">Resources</a></li>
                <li class="nav-item col-6 col-md-auto"><a class="nav-link p-2" href="/todo">To-do</a></li>
                <li class="nav-item col-6 col-md-auto"><a class="nav-link p-2" href="/schedule">Schedule</a></li>
                <li class="nav-item col-6 col-md-auto"><a class="nav-link p-2" href="/analytics">Analytics</a></li>
            </ul>
            <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav pt-2 py-md-0">
                <li class="nav-item col-6 col-md-auto"><a class="nav-link p-2" href="/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
                  </svg></a></li>
                <li class="nav-item col-6 col-md-auto"><a class="nav-link p-2" href="/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16">
                    <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/>
                  </svg></a></li>
                <li class="nav-item col-6 col-md-auto"><a class="nav-link p-2" href="/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16">
                    <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383-4.758 2.855L15 11.114v-5.73zm-.034 6.878L9.271 8.82 8 9.583 6.728 8.82l-5.694 3.44A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.739zM1 11.114l4.758-2.876L1 5.383v5.73z"/>
                  </svg></a></li>
                  <li class="nav-item col-6 col-md-auto"><a class="nav-link p-2" href="/logout">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
                        <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
                      </svg>
                    </a>
                  </li>
            </ul>
        </nav>
    </header>
    <div class="container-xxl mt-4">
        <div class="form_container">
        <form class="row justify-content-center" method="POST">
               <div class="col-6 handle">
 <input name="handle" class="form-control" placeholder="Codeforces Handle" required value={{#if isDefined}}{{handle}}{{/if}}>
               
               </div>
               <div class="col-2">
<input type="submit" class="btn btn-outline-primary" value="Submit">
               </div>
                
            </form>
        </div>
    
    
    {{#if isDefined}}
    <div class="container">
        <div class="row justify-content-between mt-3">
            <div class="col-2 dp">
                    <img class="img-thumbnail profile" src={{profile.avatar}}>
                
                
                <div class="rank mt-2 m-1 btn btn-warning">
                    {{profile.rank}}
                </div>
            </div>
            
            
                
               
                    <div class="col-5">
                        
                <table class="table table-info table-striped rounded table-hover">
                    <tbody> 
                        <tr>
                            {{!-- <td scope="row"></td> --}}
                            <td>Current Rating</td>
                            <td class="text-right">{{profile.rating}}</td>
                        </tr>
                        <tr>
                            {{!-- <td scope="row"></td> --}}
                            <td>Maximum Rating</td>
                            <td class="text-right">{{profile.maxRating}}</td>
                        </tr>
                         <tr>
                            {{!-- <td scope="row"></td> --}}
                            <td>Contests</td>
                            <td class="text-right">{{profile.contests}}</td>
                        </tr>
                        <tr>
                            {{!-- <td scope="row"></td> --}}
                            <td>Tried</td>
                            <td class="text-right">{{profile.tried}}</td>
                        </tr>
                        <tr>
                            <td>
                                Solved
                            </td>
                            <td class="text-right">
                                {{profile.solved}}
                            </td>
                        </tr>
                    </tbody>
                </table>
                    </div>
                    <div class="col-5">
                        <table class="table table-primary table-striped rounded table-hover">
                    <tbody class="rounded"> 
                        <tr class="rounded">
                            {{!-- <td scope="row"></td> --}}
                            <td>OneShot</td>
                            <td class="text-right">{{profile.oneShot}}</td>
                        </tr>
                        <tr>
                            {{!-- <td scope="row"></td> --}}
                            <td>Maximum Rank</td>
                            <td class="text-right">{{profile.maxRank}}</td>
                        </tr>
                         <tr>
                            {{!-- <td scope="row"></td> --}}
                            <td>Minimum Rank</td>
                            <td class="text-right">{{profile.minRank}}</td>
                        </tr>
                        <tr>
                            {{!-- <td scope="row"></td> --}}
                            <td>Maximum Up</td>
                            <td class="text-right">{{profile.maxUp}}</td>
                        </tr>
                        <tr>
                            <td>
                                Maximum Down
                            </td>
                            <td class="text-right">
                                {{profile.maxDown}}
                            </td>
                        </tr>
                    </tbody>
                </table>
                        
                  
                    </div>
                
               
                

                
        </div>
        <div class="row">
            <div class="col-12">
                <div id="chartContainer1" style="height: 370px; width: 100%;margin: 0 auto;"></div>
    
            </div>
            <div class="col-12">
                <div id="chartContainer2" class="mt-4" style="height: 370px; width: 100%;margin: 0 auto;"></div>
            </div>
            <div class="col-12 mt-3">
                <div id="chartContainer" style="height: 370px; width: 100%; margin: 0 auto;"></div>
            </div>
        </div>
    
     
    
    </div>
    {{/if}}
    </div>
</body>
</html>